# Licet Configuration

server:
  port: 8080
  host: 0.0.0.0
  settings_enabled: true  # Set to false to disable access to the settings page
  utilization_enabled: true  # Set to false to disable access to the utilization pages
  statistics_enabled: true  # Set to false to disable access to the statistics page
  cors_origins:  # Allowed origins for CORS (leave empty or set to ["*"] for wildcard - NOT RECOMMENDED)
    - "http://localhost:8080"
    - "https://yourdomain.com"

  # HTTPS/TLS Configuration
  tls_enabled: false  # Set to true to enable HTTPS
  tls_cert_file: "/path/to/certificate.crt"  # Path to TLS certificate file (required if tls_enabled is true)
  tls_key_file: "/path/to/private.key"  # Path to TLS private key file (required if tls_enabled is true)

database:
  # Options: sqlite, postgres, mysql
  type: sqlite
  database: licet.db

  # For postgres/mysql:
  # host: localhost
  # port: 5432  # 5432 for postgres, 3306 for mysql
  # username: licet
  # password: changeme
  # sslmode: disable

  # Connection pool settings (optional, defaults shown):
  # max_open_conns: 25       # Maximum open connections (0 = use default)
  # max_idle_conns: 5        # Maximum idle connections (0 = use default)
  # conn_max_lifetime: 0     # Connection max lifetime in minutes (0 = unlimited)

logging:
  level: info  # debug, info, warn, error
  format: text  # text or json

# License servers to monitor
servers:
  - hostname: "27000@flexlm.example.com"
    description: "Production FlexLM Server"
    type: "flexlm"
    cacti_id: ""
    webui: ""

  - hostname: "5053@rlm.example.com"
    description: "RLM License Server"
    type: "rlm"
    webui: "http://rlm.example.com:4000"

  # - hostname: "spm.example.com"
  #   description: "SPM Server"
  #   type: "spm"

email:
  enabled: false
  from: "licensing@example.com"
  to:
    - "admin@example.com"
  alerts:
    - "alerts@example.com"
  smtp_host: "smtp.example.com"
  smtp_port: 587
  username: ""
  password: ""

alerts:
  enabled: true
  lead_time_days: 10  # Warn this many days before expiration
  resend_interval_min: 60  # Minutes between duplicate alerts

rrd:
  enabled: false
  directory: "./rrd"
  collection_interval: 5  # Minutes between data collection

# Response caching configuration
cache:
  enabled: true  # Enable/disable API response caching
  ttl_seconds: 30  # Cache time-to-live in seconds
  max_entries: 1000  # Maximum number of cached entries

# Rate limiting configuration
ratelimit:
  enabled: true  # Enable/disable rate limiting
  requests_per_minute: 100  # Maximum requests per minute per IP
  burst_size: 20  # Maximum burst size
  whitelisted_ips:  # IPs exempt from rate limiting
    - "127.0.0.1"
    - "::1"
  whitelisted_paths:  # Paths exempt from rate limiting
    - "/api/v1/health"
    - "/static/"

# Data export configuration
export:
  enabled: true  # Enable/disable data export endpoints
  allowed_formats:  # Allowed export formats
    - "json"
    - "csv"
  max_records: 10000  # Maximum records per export
